!function(){function t(){return o++}function e(t){return t.replace(/\W/g,"_")}function n(t,e){e=e||"ms";var n=0,a=t.toLowerCase().match(/[-+]?[0-9\.]+[a-z]+/g);return null!==a&&a.forEach(function(t){var e=t.match(/[0-9\.]+/g)[0],a=t.match(/[a-z]+/g)[0];n+=i(e,a)}),n/s[e]}function i(t,e){var n=s[e];if(n)return t*n;throw new Error('The unit "'+e+'" could not be recognized')}function a(){return this instanceof a?(this.groups=[],this.currentGroupIndex=-1,this.animationSteps=[],this.cssClassStack=[],this):new a}var o=1,s={"Î¼s":1,ms:1e3,s:1e6,m:6e7,h:36e8,d:864e8,w:6048e8},r=function(t){"use strict";function e(t,e,n,i,a){this.component=t,this.node=e,this.css=n,this.prefixes=i,this.doc=a}function n(t){t instanceof e||(t=c(this.component,t,this.prefixes,this.doc)),this.remove(),e.call(this,t.component,t.node,t.css,t.prefixes,t.doc)}function i(t,e,n){return e+"-"+n.toLowerCase()}function a(t,e,n){var a,o=[],s="number"==typeof e?"px":"",r=t.replace(p,i);for(a=0;a<n.length;a++)o.push("-",n[a],"-",r,":",e,s,";");return o.push(r,":",e,s,";"),o.join("")}function o(t,e){return t.length?t+"-"+e:e}function s(t,e,n,i){var r,c,u;for(r in n)if(l.call(n,r))if("object"==typeof n[r])if(h(n[r]))for(c=n[r],u=0;u<c.length;u++)t.push(a(o(e,r),c[u],i));else s(t,o(e,r),n[r],i);else t.push(a(o(e,r),n[r],i));return t.join("")}function r(t,e,n){var i,a,o,c,u,p,h,g,y,v,w=[];for(h in e)if(l.call(e,h))for(v=h.length,v||(h=t.slice(0,-1)),i="@"===h.charAt(0),p=i||!t.indexOf(h+" "),a=i&&m.test(h)?t:"",o=i&&!f.test(h),c=o?h.slice(1):h,g=d.concat(e[v?h:""]),y=0;y<g.length;y++)if(u=g[y],o){for(v=n.length;v--;)w.push("@-",n[v],"-",c,"{",r(a,u,[n[v]]),"}");w.push(h,"{",r(a,u,n),"}")}else w.push(p?h:t+h,"{",s([],"",u,n),"}");return w.join("")}var c,u=t.toString,l=t.hasOwnProperty,p=/([a-z])([A-Z])/g,f=/^@(?:page|font-face)/,m=/^@(?:media)/,h=Array.isArray||function(t){return"[object Array]"===u.call(t)},d=[];return e.prototype={overwrite:n,replace:n,set:n,remove:function(){var t=this.node,e=t.parentNode;e&&e.removeChild(t)},valueOf:function(){return this.css}},{undefined:!0}[typeof document]?(c=function(t,e,n){return"object"==typeof t?(n=e,e=t,t=""):t+=" ",r(t,e,n||d)},c.restyle=c):c=function(t,n,i,a){"object"==typeof t?(a=i,i=n,n=t,o=t=""):o=t+" ";var o,s=a||(a=document),u=r(o,n,i||(i=c.prefixes)),l=s.head||s.getElementsByTagName("head")[0]||s.documentElement,p=l.insertBefore(s.createElement("style"),l.lastChild);return p.type="text/css",p.styleSheet?p.styleSheet.cssText=u:p.appendChild(s.createTextNode(u)),new e(t,p,u,i,a)},{undefined:!0}[typeof window]||(c.animate=function(n){var i,a,o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,10)},s={},r="restyle-".concat(Math.random()*+new Date,"-"),u=0;switch(!0){case!!n.AnimationEvent:i="animationend";break;case!!n.WebKitAnimationEvent:i="webkitAnimationEnd";break;case!!n.MSAnimationEvent:i="MSAnimationEnd";break;case!!n.OAnimationEvent:i="oanimationend"}switch(!0){case!!n.TransitionEvent:a="transitionend";break;case!!n.WebKitTransitionEvent:a="webkitTransitionEnd";break;case!!n.MSTransitionEvent:a="MSTransitionEnd";break;case!!n.OTransitionEvent:a="oTransitionEnd"}c.transition=function(t,e,n){function i(){a?t.removeEventListener(a,p,!1):(clearTimeout(g),g=0)}function l(){S[m]=d.last=f(E,w.shift()),d.css.replace(S),a?t.addEventListener(a,p,!1):g=setTimeout(p,10)}function p(e){i(),w.length?o(l):(e?e.detail=h:e=new CustomEvent("transitionend",{detail:h}),n&&n.call(t,e))}function f(t,e){for(var n in e)t[n]=e[n];return t}var m,h,d,g,y=e.transition||"all .3s ease-out",v=t.getAttribute("id"),w=[].concat(e.to),E=f({},e.from),b=!v,S={};return b&&t.setAttribute("id",v=(r+u++).replace(".","-")),m="#"+v,s.hasOwnProperty(v)?(d=s[v],E=d.last=f(d.last,E),S[m]=E,d.transition.remove(),d.css.replace(S)):d=s[v]={last:S[m]=E,css:c(S)},o(function(){S[m]={transition:y},d.transition=c(S),o(l)}),h={clean:function(){b&&t.removeAttribute("id"),i(),d.transition.remove(),d.css.remove(),delete s[v]},drop:i}},e.prototype.getAnimationDuration=function(t,e){for(var n,i,a=t.className.split(/\s+/),o=a.length;o--;)if(n=a[o],n.length&&new RegExp("\\."+n+"(?:|\\{|\\,)([^}]+?)\\}").test(this.css)&&(n=RegExp.$1,(new RegExp("animation-name:"+e+";.*?animation-duration:([^;]+?);").test(n)||new RegExp("animation:\\s*"+e+"\\s+([^\\s]+?);").test(n))&&(n=RegExp.$1,i=parseFloat(n))))return i*(/[^m]s$/.test(n)?1e3:1);return-1},e.prototype.getTransitionDuration=function(t){var e=getComputedStyle(t),n=e.getPropertyValue("transition-duration")||/\s(\d+(?:ms|s))/.test(e.getPropertyValue("transition"))&&RegExp.$1;return parseFloat(n)*(/[^m]s$/.test(n)?1e3:1)},e.prototype.transit=a?function(t,e){function n(n){i(),e.call(t,n)}function i(){t.removeEventListener(a,n,!1)}return t.addEventListener(a,n,!1),{drop:i}}:function(t,e){var n=setTimeout(e,this.getTransitionDuration(t));return{drop:function(){clearTimeout(n)}}},e.prototype.animate=i?function(t,e,n){function a(i){i.animationName===e&&(o(),n.call(t,i))}function o(){t.removeEventListener(i,a,!1)}return t.addEventListener(i,a,!1),{drop:o}}:function(e,n,i){var a,o,s=this.getAnimationDuration(e,n);return s<0?o=t:(a=setTimeout(function(){i.call(e,{type:"animationend",animationName:n,currentTarget:e,target:e,stopImmediatePropagation:t,stopPropagation:t,preventDefault:t})},s),o=function(){clearTimeout(a)}),{drop:o}}}(window)),c.customElement=function(t,e,n){var i,a="extends",o=Object.create(e.prototype),s={prototype:o},r=s.hasOwnProperty,u=n&&r.call(n,a);u&&(s[a]=n[a]);for(i in n)i!==a&&(o[i]="css"===i?c(u?n[a]+"[is="+t+"]":t,n[i]):n[i]);return document.registerElement(t,s)},c.prefixes=["webkit","moz","ms","o"],c}({});a.prototype={select:function(t){return this.groups.push(t),this.currentGroupIndex++,this},play:function(t,n,i){var a={type:"play",group:this.groups[this.currentGroupIndex],name:e(t),duration:n,durationms:this._getMilliseconds(n),easing:i};return this._generateClass(a),this.animationSteps.push(a),this},playCascade:function(t,n,i){var a={type:"playCascade",cascade:!0,group:this.groups[this.currentGroupIndex],name:e(t),duration:n,durationms:this._getMilliseconds(n),easing:i};return this._generateClass(a),this.animationSteps.push(a),this},reset:function(){this.cssClassStack.forEach(function(t){document.querySelectorAll("."+t).forEach(function(e){e.classList.remove(t)})}),this.animationSteps=[],this.currentGroupIndex=-1,this.groups=[]},_getMilliseconds:function(t){return"number"==typeof t?t:n(t)},_generateClass:function(e){var n=e.name+t();e.className=n;var i=e.durationms+"ms",a=e.easing,o="forwards",s=[e.name,i,a,o].join(" "),c="."+n,u={};u[c]={animation:s,opacity:1};r(u);this.cssClassStack.push(n)},wait:function(t){return this.animationSteps.push({type:"wait",cb:t||new Function}),this},clear:function(t){return this.animationSteps.push({type:"clear",cb:t||new Function}),this},start:function(){return this.setupWaitCalls(),this.runStep(0),this},setupWaitCalls:function(){for(var t=this,e=0;e<this.animationSteps.length;e++){var n=this.animationSteps[e];if("wait"===n.type){var i=this.animationSteps[e-1];i.nextStepIndex=e+1,i.callback=function(){this.cb&&this.cb(),t.runStep(this.nextStepIndex)}.bind(i)}}},runStep:function(t){if(!(t>=this.animationSteps.length)){var e=this.animationSteps[t],n=this;if("wait"===e.type)throw new Error("wait should be called after a play or playCascade method has been called");if("clear"===e.type){var i=this.cssClassStack.shift(),a=this._getLastPlayStep(t);if(!a)throw new Error("play or playCascade must be called before clear");return a.elems.forEach(function(t){t.classList.remove(i)}),void n.runStep(t+1)}var o=e.durationms,s=this._getTargetElements(e.group);if(e.elems=s,e.cascade){var r=0,c=s.length*e.durationms;console.log("cascadeDuration ",c),s.forEach(function(t){console.log("cascade startTime ",r),setTimeout(function(){console.log("-> applying class to element in cascade"),t.classList.add(e.className)}.bind(this),r),r+=e.durationms}),e.callback?setTimeout(function(){e.callback()},c):n.runStep(t+1)}else s.forEach(function(t){t.classList.add(e.className)}),e.callback?setTimeout(function(){e.callback()},o):n.runStep(t+1)}},_getLastPlayStep:function(t){for(;t>=0;){if("play"===this.animationSteps[t].type||"playCascade"===this.animationSteps[t].type)return this.animationSteps[t];t--}return null},_getTargetElements:function(t){return"string"==typeof t?Array.prototype.slice.call(document.querySelectorAll(t),0):window.jQuery&&t instanceof jQuery?Array.prototype.slice.call(t):t instanceof NodeList?Array.prototype.slice.call(t):t instanceof Node?[t]:void 0}},"object"==typeof exports&&exports?module.exports=a:window.Baile=a}();